<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ovollovo.shoppingmall.goods.dao.GoodsMapper">
  <insert id="registerGoods" >
  	insert into goods values(#{name},#{code},#{category},#{price},#{stock},#{description},#{thumbnail_image}, default)
  </insert>
  <select id="searchGoods" resultType="com.ovollovo.shoppingmall.goods.Goods">
  	select * from goods where code= #{code}
  </select>
  <select id="searchCode" resultType="String">
  	select code from goods where code= #{code}
  </select>
  <select id="searchNewGoods" resultType="com.ovollovo.shoppingmall.goods.Goods">
  	select name,code,price,description,thumbnail_image,registered_time from goods order by registered_time desc limit 4
  </select>   
   <select id="searchCategoryName" resultType="String">
  	select name from category where code = #{category}
  </select>
  <select id="searchCategoryFirstGoods" resultType="com.ovollovo.shoppingmall.goods.Goods">
  	select * from goods where category like concat(#{category},'%%')  order by registered_time desc limit #{n},#{m}
  </select>
  <select id="searchCategorySecondGoods" resultType="com.ovollovo.shoppingmall.goods.Goods">
  	select * from goods where category = #{category} order by registered_time desc limit #{n},#{m}
  </select>
  <select id="searchCategoryFirstCount" resultType="int">
  	select count(*) from goods where category like concat(#{category},'%%')
  </select>
  <select id="searchCategorySecondCount" resultType="int">
  	select count(*) from goods where category = #{category}
  </select>
  <select id="searchCategoryNumber" resultType="int">
  	select category from goods where code = #{code}
  </select>
</mapper>
